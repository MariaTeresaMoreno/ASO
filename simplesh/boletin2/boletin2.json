{
    "setup": {
        "desc": "B1",
        "shell": "simplesh",
        "prompt": "mtmoreno@.*> ",
        "timeout": 3,
        "cmds": [
            "touch f1",
            "touch f2",
            "mkdir dir",
            "mkdir olddir"
        ],
        "verbose": 1
    },
    "tests": [
        {
            "cmd": "\n",
            "out": "^$"
        },
        {
            "cmd": "echo -n l1 > f3 ; echo l2 >> f3 ; cat f3 | grep l1",
            "out": "^l1l2$"
        },
        {
            "cmd": "echo -n l1 > f4 ; echo l2 >> f4 ; echo -n l3 > f4 ; cat f4 | grep l3",
            "out": "^l3$"
        },
        {
            "cmd": "(cat f3 ; cat f4) | grep l | wc -c",
            "out": "^8$"
        },
        {
            "cmd": "( cd /etc ; cat lsb-release | grep DESCRIPTION | cut -d = -f 2 ) > dist ; cat dist",
            "out": "^\"Ubuntu 18.* LTS\"$"
        },


        {
            "cmd": "cwd",
            "out": "^cwd: /tmp/tmp.*$"
        },
        {
            "cmd": "cwd | tr / : | cut -d : -f 3",
            "out": "^tmp.*$"
        },
        {
            "cmd": "cwd > cwdfile ; cat cwdfile",
            "out": "^cwd: /tmp/tmp.*$"
        },
        {
            "cmd": "(cwd)",
            "out": "^cwd: /tmp/tmp.*$"
        },
        {
            "cmd": "cd dir >> emptyfile ; cwd ; cat ../emptyfile",
            "out": "^cwd: /tmp/tmp.*/dir$"
        },


        {
            "cmd": "exit",
            "out": "^$"
        },
        {
            "cmd": "echo 1 ; exit ; echo 2",
            "out": "^1$"
        },
        {
            "cmd": "exit | cwd",
            "out": "^cwd: /tmp/tmp.*$"
        },
        {
            "cmd": "exit & ; cwd",
            "out": "^(\\[[0-9]{1,5}\\]\\r\\n){0,1}cwd: /tmp/tmp.*$(\\[[0-9]{1,5}\\]\\r\\n){0,1}"
        },
        {
            "cmd": "echo -n 1 ; (exit) ; echo 2",
            "out": "^12$"
        },


        {
            "cmd": "cd nodir ; cd dir dir",
            "out": "^run_cd: No existe el directorio 'nodir'\r\nrun_cd: Demasiados argumentos$"
        },
        {
            "cmd": "cd dir ; cwd",
            "out": "^cwd: /tmp/tmp.*/dir$"
        },
        {
            "cmd": "cd dir | cwd",
            "out": "^cwd: /tmp/tmp.*$"
        },
        {
            "cmd": "cd dir &",
            "out": "^\\[[0-9]{1,5}\\]$"
        },
        {
            "cmd": "(cd dir) ; cwd",
            "out": "^cwd: /tmp/tmp.*$"
        },


        {
            "cmd": "cd ; cwd",
            "out": "^cwd: /home/alumno$"
        },
        {
            "cmd": "cd -",
            "out": "^run_cd: Variable OLDPWD no definida$"
        },
        {
            "cmd": "cd dir ; cd ; cd - ; cwd",
            "out": "^cwd: /tmp/tmp.*/dir$"
        },
        {
            "cmd": "cd olddir; cd ../dir; cd - ; cwd",
            "out": "^cwd: /tmp/tmp.*/olddir$"
        },
        {
            "cmd": "(cd dir ; cwd ; cd ; cwd ; cd - ; cwd) | grep dir > f2 ; wc -l f2",
            "out": "^2 f2$"
        }
    ]
}
